validParams=["time_zone","work_hours","limit_streets"];const e=window.location.search.substring(1).split("&").filter((e=>([name]=e.split("="),validParams.includes(name)))),t={};for(const o of e){const[e,n]=o.split("=");t[e]=n}var o=t.work_hours.split(","),n=t.time_zone,a=JSON.parse(t.limit_streets),l=moment(o[0],"HH:mm"),r=moment(o[1],"HH:mm"),u=(new moment).format(),m=(u=moment.tz(u,n),(new moment).add(1,"days").format());m=moment.tz(m,n);if(a){var i=document.getElementById("streetlimit");i.parentNode.removeChild(i)}var s,d="<option value='now'>‚åöÔ∏è –ë–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è</option>",c=0;for(c=(s=void 0,s=Number(u.format("HH")),l.format("HH")<=s?s+1:l.format("HH"));c<r.format("HH");c++){var g=h(c,2),_=moment(u),v=g,f=moment(v,"HH:mm");_.set({hour:f.get("hour"),minute:f.get("minute"),second:f.get("second")}),Number(u.format("mm"))<=30&&(d+="<option value='"+_.format()+"'>‚åöÔ∏è "+g+":00 –°–µ–≥–æ–¥–Ω—è</option>");_=moment(u),v=g+30,f=moment(v,"HH:mm");_.set({hour:f.get("hour"),minute:f.get("minute"),second:f.get("second")}),d+="<option value='"+_.format()+"'>‚åöÔ∏è "+g+":30 –°–µ–≥–æ–¥–Ω—è</option>"}for(c=l.format("HH");c<r.format("HH");c++){g=h(c,2),_=moment(m),v=g,f=moment(v,"HH:mm");_.set({hour:f.get("hour"),minute:f.get("minute"),second:f.get("second")}),d+="<option value='"+_.format()+"'>‚åöÔ∏è "+g+":00 –ó–∞–≤—Ç—Ä–∞</option>";_=moment(m),v=g+30,f=moment(v,"HH:mm");_.set({hour:f.get("hour"),minute:f.get("minute"),second:f.get("second")}),d+="<option value='"+_.format()+"'>‚åöÔ∏è "+g+":30 –ó–∞–≤—Ç—Ä–∞</option>"}function h(e,t){return(t-=e.toString().length)>0?new Array(t+(/\./.test(e)?2:1)).join("0")+e:e+""}$("select").html(d),window.addEventListener("DOMContentLoaded",(function(){[].forEach.call(document.querySelectorAll(".tel"),(function(e){var t;function o(e){e.keyCode&&(t=e.keyCode),this.selectionStart<3&&e.preventDefault();var o="+7 (___) ___-__-__",n=0,a=o.replace(/\D/g,""),l=this.value.replace(/\D/g,""),r=o.replace(/[_\d]/g,(function(e){return n<l.length?l.charAt(n++)||a.charAt(n):e}));-1!=(n=r.indexOf("_"))&&(n<5&&(n=3),r=r.slice(0,n));var u=o.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");(!(u=new RegExp("^"+u+"$")).test(this.value)||this.value.length<5||t>47&&t<58)&&(this.value=r),"blur"==e.type&&this.value.length<5&&(this.value="")}e.addEventListener("input",o,!0),e.addEventListener("focus",o,!0),e.addEventListener("blur",o,!0),e.addEventListener("keydown",o,!0)}))}));var p=window.Telegram.WebApp;p.expand(),p.MainButton.text="–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å",p.MainButton.setText("–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å"),p.MainButton.textColor="#FFFFFF",p.MainButton.color="#32746a",p.MainButton.setParams({color:"#32746a"}),p.MainButton.show(),p.MainButton.enable();const y="ae88835bdbe058921eb8012bc6b79a7a7e606ac9";var I,S="ADDRESS",b=$("#street"),E=$("#house");$("#message");function B(e){console.log(e),e.data.house?console.log("–í–µ—Ä–Ω–æ, –º–æ–∂–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å!"):(console.log("–£–∫–∞–∂–∏—Ç–µ –∞–¥—Ä–µ—Å –¥–æ –¥–æ–º–∞, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å"),$("#house")[0].reportValidity(),document.getElementById("house").focus()),I=e.data,seladdr=e.data.city_kladr_id,tg_kladrid=e.data.street_kladr_id,tg_street=e.data.street_with_type,tg_house=e.data.house_type+" "+e.data.house,tg_geo_lat=e.data.geo_lat,tg_geo_lon=e.data.geo_lon,tg_qc_geo=e.data.qc_geo,tg_full_street=e.unrestricted_value,null==e.data.block?tg_building="":tg_building=e.data.block_type+" "+e.data.block}function H(){I=null}b.suggestions({token:y,type:S,scrollOnFocus:!0,onSelect:B,onSelectNothing:H,hint:"–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç –∏–ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ –≤–≤–æ–¥",bounds:"street",constraints:{locations:[{city:"–¢—é–º–µ–Ω—å"}]},restrict_value:!0}),E.suggestions({token:y,type:S,scrollOnFocus:!0,onSelect:B,onSelectNothing:H,hint:!1,noSuggestionsHint:!1,bounds:"house",constraints:b});let k=localStorage.getItem("t_name"),w=localStorage.getItem("t_phone"),M=localStorage.getItem("t_address"),D=localStorage.getItem("t_house"),x=localStorage.getItem("t_flat"),A=localStorage.getItem("t_floor"),F=localStorage.getItem("t_entrance"),N=localStorage.getItem("t_intercom");$("#name").val(k),$("#phone").val(w),$("#street").val(M),$("#house").val(D),$("#flat").val(x),$("#floor").val(A),$("#entrance").val(F),$("#intercom").val(N),E.on("suggestions-fixdata",(function(e,t){})),E.suggestions().fixData(),Telegram.WebApp.onEvent("mainButtonClicked",(function(){console.log("–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–ª–µ–π ");for(var e=document.querySelectorAll(".option-input"),t=0;t<e.length;t++)if(e[t].checked){g=e[t].value;break}if(function(e){var t=$("#name").val(),o=$("#phone").val();if(t.length<1)return document.getElementById("name").focus(),$("#name")[0].reportValidity(),!0;if(o.length<18)return document.getElementById("phone").focus(),$("#phone")[0].reportValidity(),!0;if(!a&&"delivery"==e){if($("#street").val(),$("#house").val(),null==I)return document.getElementById("street").focus(),$("#street")[0].reportValidity(),!0;if(null==I.house)return document.getElementById("house").focus(),$("#house")[0].reportValidity(),!0}return!1}(g))return console.log("–û—à–∏–±–∫–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö"),!1;var o=p.platform,n=function(){let e=localStorage.getItem("MachineId");return e||(e=crypto.randomUUID(),localStorage.setItem("MachineId",e)),e}();if("delivery"==g){if(a)l="",r="",u="",m="",i="",s="",d="",c=0;else{var l=tg_kladrid,r=tg_street,u=tg_house,m=tg_building,i=tg_geo_lat,s=tg_geo_lon,d=tg_full_street,c=tg_qc_geo;localStorage.setItem("t_address",r),localStorage.setItem("t_house",u)}var g="üöõ –î–æ—Å—Ç–∞–≤–∫–∞",_=document.getElementById("dining-number").value,v=document.getElementById("select").value,f=document.getElementById("name").value,h=document.getElementById("flat").value,y=document.getElementById("floor").value,S=document.getElementById("entrance").value,b=document.getElementById("intercom").value,E=document.getElementById("phone").value,B=document.getElementById("about").value;localStorage.setItem("t_flat",h),localStorage.setItem("t_floor",y),localStorage.setItem("t_entrance",S),localStorage.setItem("t_intercom",b),data={platform:o,guuid:n,dostavka:g,cutlery:_,delivery_time:v,name:f,phone:E,kladrid:l,full_street:d,qc_geo:c,street:r,house:u,building:m,flat:h,floor:y,entrance:S,intercom:b,geo_lat:i,geo_lon:s,about:B}}else{g="üèÉ –ù–∞–≤—ã–Ω–æ—Å",_=document.getElementById("dining-number").value,v=document.getElementById("select").value,f=document.getElementById("name").value,E=document.getElementById("phone").value,B=document.getElementById("about").value;data={platform:o,guuid:n,dostavka:g,cutlery:_,delivery_time:v,name:f,phone:E,about:B}}localStorage.setItem("t_name",f),localStorage.setItem("t_phone",E),p.sendData(JSON.stringify(data))}));